<script>
  const urlParams = new URLSearchParams(window.location.search);
  const categoryName = urlParams.get('category');
  document.getElementById('categoryName').textContent = categoryName;

  const prompts = JSON.parse(localStorage.getItem('prompts')) || [
    { id: 1, text: 'اشرح مفهوم الذكاء الاصطناعي بطريقة بسيطة.', category: 'تعليمي', tokens: 23 },
    { id: 2, text: 'اكتب قصة قصيرة عن رحلة إلى الفضاء.', category: 'إبداعي', tokens: 45 },
    { id: 3, text: 'ما هو تأثير التكنولوجيا على التعليم؟', category: 'تحليل بيانات', tokens: 18 },
    { id: 4, text: 'اشرح كيف تعمل خوارزميات التعلم العميق.', category: 'تعليمي', tokens: 37 },
    { id: 5, text: 'اكتب برنامجًا بلغة جافاسكربت لحساب العوامل.', category: 'برمجة', tokens: 41 },
  ];

  const filteredPrompts = prompts.filter(p => p.category === categoryName);
  const list = document.querySelector('ul');

  if (filteredPrompts.length > 0) {
    filteredPrompts.forEach(prompt => {
      const li = document.createElement('li');
      li.className = 'bg-white p-4 rounded shadow mb-3 hover:bg-gray-50 transition';
      li.innerHTML = `
        <div class="flex justify-between items-start">
          <div class="pr-4">
            <p class="font-medium">${prompt.text}</p>
            <div class="mt-2 text-sm text-gray-500">
              <span>ID: \`${prompt.id}\`</span> • <span>Tokens: \`${prompt.tokens}\`</span>
            </div>
          </div>
          <button onclick="copyPrompt('${prompt.text}')" class="text-blue-600 hover:text-blue-800 transition">نسخ</button>
        </div>
      `;
      list.appendChild(li);
    });
  } else {
    const empty = document.createElement('li');
    empty.className = 'text-center py-4 text-gray-500';
    empty.textContent = 'لا توجد برومبتات مضافة لهذا القسم.';
    list.appendChild(empty);
  }

  function copyPrompt(text) {
    navigator.clipboard.writeText(text);
    alert("تم نسخ البرومبت!");
  }
</script>
