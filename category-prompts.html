<DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>برومبتات القسم - Promptica</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <!-- Tailwind CSS -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"  rel="stylesheet" />
</head>
<body class="min-h-screen bg-gray-50 p-4">

  <!-- Banner -->
  <div class="mb-6">
    <img src="banner.png" alt="بانير موقع Promptica" class="w-full h-auto rounded-lg shadow-md object-cover max-h-64">
  </div>

  <!-- Header -->
  <header class="flex justify-between items-center pb-4 border-b border-gray-200 mb-6">
    <h1 class="text-2xl sm:text-3xl font-bold text-indigo-700 flex items-center">
      <img src="logo1.png" alt="شعار Promptica" class="w-8 h-8 ml-2" />
      Promptica
    </h1>
    <a href="index.html" class="text-indigo-600 hover:text-indigo-800 underline">الرئيسية</a>
  </header>

  <main class="max-w-4xl mx-auto">
    <section class="bg-white p-6 rounded-lg shadow-md space-y-6">
      <h2 id="categoryTitle" class="text-xl font-bold text-gray-800">جاري التحميل...</h2>
      <input
        type="text"
        id="searchInput"
        placeholder="ابحث في هذا القسم..."
        class="w-full p-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500"
      />
      <div id="promptsList" class="space-y-4 mt-4"></div>
    </section>
  </main>

  <footer class="mt-8 pt-4 border-t border-gray-200 text-center text-sm text-gray-500">
    &copy; {{new Date().getFullYear()}} Promptica. جميع الحقوق محفوظة.
  </footer>

  <script>
    // قراءة اسم القسم من الرابط
    const urlParams = new URLSearchParams(window.location.search);
    const selectedCategory = decodeURIComponent(urlParams.get('category') || 'غير معروف');

    document.getElementById("categoryTitle").textContent = `برومبتات القسم: ${selectedCategory}`;

    // قراءة البيانات من localStorage
    const prompts = JSON.parse(localStorage.getItem('prompts')) || [];

    // عرض البرومبتات المرتبطة بهذا القسم
    const listContainer = document.getElementById("promptsList");
    const filteredPrompts = prompts.filter(p => p.category === selectedCategory);

    if (filteredPrompts.length === 0) {
      const noPrompt = document.createElement("p");
      noPrompt.className = "text-gray-500 text-center py-4";
      noPrompt.textContent = "لا توجد برومبتات مضافة لهذا القسم.";
      listContainer.appendChild(noPrompt);
    } else {
      filteredPrompts.forEach(prompt => {
        const div = document.createElement("div");
        div.className = "bg-white p-4 rounded shadow hover:bg-gray-50 transition";
        div.innerHTML = `
          <div class="font-medium text-indigo-700 mb-2">[${prompt.category}]</div>
          <p class="text-gray-800 mb-4">${prompt.text}</p>
          <div class="flex justify-end space-x-3 rtl:space-x-reverse">
            <button onclick='copyText("${prompt.text}")' class="text-blue-600 hover:text-blue-800">نسخ</button>
          </div>
        `;
        listContainer.appendChild(div);
      });
    }

    // 🔍 البحث داخل القسم
    document.getElementById("searchInput").addEventListener("input", function () {
      const searchTerm = this.value.toLowerCase();
      const filtered = prompts.filter(p =>
        p.category === selectedCategory &&
        p.text.toLowerCase().includes(searchTerm)
      );

      listContainer.innerHTML = "";
      if (filtered.length === 0) {
        const noPrompt = document.createElement("p");
        noPrompt.className = "text-gray-500 text-center py-4";
        noPrompt.textContent = "لا توجد نتائج.";
        listContainer.appendChild(noPrompt);
      } else {
        filtered.forEach(prompt => {
          const div = document.createElement("div");
          div.className = "bg-white p-4 rounded shadow hover:bg-gray-50 transition";
          div.innerHTML = `
            <div class="font-medium text-indigo-700 mb-2">[${prompt.category}]</div>
            <p class="text-gray-800 mb-4">${prompt.text}</p>
            <div class="flex justify-end space-x-3 rtl:space-x-reverse">
              <button onclick='copyText("${prompt.text}")' class="text-blue-600 hover:text-blue-800">نسخ</button>
            </div>
          `;
          listContainer.appendChild(div);
        });
      }
    });

    // 📋 نسخ نص البرومبت
    function copyText(text) {
      navigator.clipboard.writeText(text);
      alert("تم النسخ!");
    }
  </script>
</body>
</html>
