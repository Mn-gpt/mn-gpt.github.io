<DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Arabic Prompts Manager - MN.gpt</title>
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script> 
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f9fafb;
      color: #1f2937;
    }
  </style>
</head>
<body class="p-6 bg-gray-100 min-h-screen">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    function App() {
      const [categories] = useState(['عام', 'تعليمي', 'إبداعي', 'تحليل بيانات', 'برمجة', 'الجرافيك', 'الفيديو']);
      const [copiedPromptId, setCopiedPromptId] = useState({});

      const promptsByCategory = {
        'عام': [
          { id: 1, text: 'اشرح مفهوم الذكاء الاصطناعي بطريقة بسيطة.', tokens: 23 },
        ],
        'تعليمي': [
          { id: 2, text: 'اشرح كيف تعمل خوارزميات التعلم العميق.', tokens: 37 },
        ],
        'إبداعي': [
          { id: 3, text: 'اكتب قصة قصيرة عن رحلة إلى الفضاء.', tokens: 45 },
        ],
        'تحليل بيانات': [
          { id: 4, text: 'ما هو تأثير التكنولوجيا على التعليم؟', tokens: 18 },
        ],
        'برمجة': [
          { id: 5, text: 'اكتب برنامجًا بلغة جافاسكربت لحساب العوامل.', tokens: 41 },
        ],
        'الجرافيك': [
          { id: 6, text: 'صمم غلاف كتاب احترافي باستخدام Canva.', tokens: 30 },
        ],
        'الفيديو': [
          { id: 7, text: 'اخترع فكرة مقطع فيديو تسويقي مدته 30 ثانية.', tokens: 25 },
        ],
      };

      useEffect(() => {
        const storedCopies = JSON.parse(localStorage.getItem('copiedPrompts') || '{}');
        setCopiedPromptId(storedCopies);
      }, []);

      const handleCopyPrompt = (id, promptText) => {
        if (copiedPromptId[id]) return;

        navigator.clipboard.writeText(`\`\`\`\n${promptText}\n\`\`\``).then(() => {
          const updatedCopies = { ...copiedPromptId, [id]: true };
          setCopiedPromptId(updatedCopies);
          localStorage.setItem('copiedPrompts', JSON.stringify(updatedCopies));
          alert("تم النسخ بنجاح! لا يمكنك نسخ هذا البرومبت مجددًا.");
        });
      };

      const getCategoryStats = () => {
        const stats = {};
        Object.keys(promptsByCategory).forEach(category => {
          const catPrompts = promptsByCategory[category];
          const totalTokens = catPrompts.reduce((sum, p) => sum + p.tokens, 0);
          stats[category] = {
            count: catPrompts.length,
            totalTokens,
            averageTokens: Math.round(totalTokens / catPrompts.length),
          };
        });
        return stats;
      };

      const renderDashboard = () => {
        const stats = getCategoryStats();

        return (
          <div className="space-y-8 max-w-4xl mx-auto">
            <h2 className="text-3xl font-bold text-center text-gray-800">لوحة الإحصاءات</h2>

            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
              <div className="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow">
                <h3 className="text-lg font-semibold text-gray-700 mb-2">إجمالي البرومبتات</h3>
                <p className="text-3xl font-bold text-indigo-600">{Object.values(promptsByCategory).flat().length}</p>
              </div>
              <div className="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow">
                <h3 className="text-lg font-semibold text-gray-700 mb-2">إجمالي التوكيانات</h3>
                <p className="text-3xl font-bold text-blue-600">
                  {Object.values(stats).reduce((sum, s) => sum + s.totalTokens, 0)}
                </p>
              </div>
              <div className="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow">
                <h3 className="text-lg font-semibold text-gray-700 mb-2">عدد الأقسام</h3>
                <p className="text-3xl font-bold text-green-600">{categories.length}</p>
              </div>
            </div>

            {categories.map(category => {
              const categoryPrompts = promptsByCategory[category];
              const categoryStats = stats[category];

              return (
                <div key={category} className="bg-white rounded-xl shadow-md overflow-hidden">
                  <div className="bg-gray-100 px-6 py-4 border-b border-gray-200 flex justify-between items-center">
                    <h3 className="text-xl font-semibold text-gray-800">{category}</h3>
                    <span className="text-sm text-gray-600">
                      {categoryStats.count} برومبت — {categoryStats.totalTokens} توكيان
                    </span>
                  </div>
                  <div className="p-6 space-y-4">
                    {categoryPrompts.map(prompt => (
                      <div key={prompt.id} className="border border-gray-200 rounded-lg p-4 relative">
                        <pre className="whitespace-pre-wrap text-gray-700 font-medium">{prompt.text}</pre>
                        <button
                          onClick={() => handleCopyPrompt(prompt.id, prompt.text)}
                          disabled={copiedPromptId[prompt.id]}
                          className={`mt-2 px-4 py-2 rounded text-white ${
                            copiedPromptId[prompt.id]
                              ? 'bg-gray-400 cursor-not-allowed'
                              : 'bg-indigo-600 hover:bg-indigo-700'
                          }`}
                        >
                          {copiedPromptId[prompt.id] ? 'تم النسخ' : 'نسخ كـ Markdown'}
                        </button>
                      </div>
                    ))}
                  </div>
                </div>
              );
            })}
          </div>
        );
      };

      return (
        <div>
          {renderDashboard()}
          <footer className="text-center mt-10 text-sm text-gray-500">
            جميع الحقوق محفوظة © {new Date().getFullYear()} | MN.gpt
          </footer>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
