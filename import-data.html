<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>ุงุณุชูุฑุงุฏ ุจูุงูุงุช - Promptica</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  
  <!-- React + ReactDOM -->
  <script src="https://unpkg.com/react@18/umd/react.development.js"  crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"  crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script> 

  <!-- Tailwind CSS CDN -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"  rel="stylesheet">

  <!-- Internal Styles -->
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f9fafb;
      color: #1f2937;
      line-height: 1.8;
    }
    .line-clamp-3 {
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    @media (max-width: 640px) {
      html { font-size: 16px; }
      textarea { font-size: 0.875rem; padding: 0.75rem; }
    }
  </style>
</head>
<body class="min-h-screen bg-gray-50 p-4">
  <!-- Header -->
  <header class="flex justify-between items-center pb-4 border-b border-gray-200 mb-6">
    <h1 class="text-2xl sm:text-3xl font-bold text-indigo-700 flex items-center">Promptica</h1>
    <div class="space-x-4 rtl:space-x-reverse">
      <a href="index.html" class="text-indigo-600 hover:text-indigo-800 underline">โ ุงูุฑุฌูุน ุฅูู ููุญุฉ ุงูุชุญูู</a>
    </div>
  </header>

  <!-- Root Div for React App -->
  <div id="root"></div>

  <!-- Footer -->
  <footer class="mt-8 pt-4 border-t border-gray-200 text-center text-sm text-gray-500">
    &copy; {{new Date().getFullYear()}} Promptica. ุฌููุน ุงูุญููู ูุญููุธุฉ.
  </footer>

  <!-- React Code -->
  <script type="text/babel">
    const { useState } = window.React;

    function App() {
      const [rawText, setRawText] = useState('');
      const [fileContent, setFileContent] = useState('');
      const [parsedPrompts, setParsedPrompts] = useState([]);
      const [copiedCount, setCopiedCount] = useState(0);
      const [dropZoneActive, setDropZoneActive] = useState(false);

      // ๐ฅ ูุนุงูุฌุฉ ูุตู ุงููุต
      const handlePaste = (e) => {
        const text = e.clipboardData.getData('text');
        setRawText(text);
        parsePrompts(text);
      };

      // ๐ ูุฑุงุกุฉ ููู
      const handleFileUpload = (e) => {
        const file = e.target.files[0];
        if (!file) return;

        const reader = new FileReader();
        reader.onload = (event) => {
          const content = event.target.result;
          setFileContent(content);
          parsePrompts(content);
        };
        reader.readAsText(file);
      };

      // ๐ง ุงุณุชุฎุฑุงุฌ ุงูุจุฑููุจุชุงุช (ูุซุงู ุจุณูุท)
      const parsePrompts = (text) => {
        const lines = text.split('\n').filter(line => line.trim());
        const prompts = lines.map((line, index) => ({
          id: index,
          text: line.trim(),
          wordCount: line.trim().split(/\s+/).length
        }));
        setParsedPrompts(prompts);
      };

      // ๐ฑ๏ธ drag and drop events
      const handleDragOver = (e) => {
        e.preventDefault();
        setDropZoneActive(true);
      };

      const handleDragLeave = () => {
        setDropZoneActive(false);
      };

      const handleDrop = (e) => {
        e.preventDefault();
        setDropZoneActive(false);
        if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {
          const file = e.dataTransfer.files[0];
          const reader = new FileReader();
          reader.onload = (event) => {
            const content = event.target.result;
            setFileContent(content);
            parsePrompts(content);
          };
          reader.readAsText(file);
        }
      };

      // ๐ ูุณุฎ ุงููุต
      const copyToClipboard = (text) => {
        navigator.clipboard.writeText(text).then(() => {
          setCopiedCount(prev => prev + 1);
          alert("โ ุชู ุงููุณุฎ!");
        });
      };

      return (
        <div className="container mx-auto max-w-4xl">
          <h2 className="text-2xl sm:text-3xl font-bold text-gray-800 mb-6">ุงุณุชูุฑุงุฏ ุจูุงูุงุช ูู ููู ุฃู ูุต</h2>

          {/* ููุทูุฉ ูุตู */}
          <div className="bg-white p-6 rounded shadow-md mb-8">
            <h3 className="font-semibold text-lg mb-4">ูุตู ูุต ูุจุงุดุฑ</h3>
            <textarea
              placeholder="ุถุน ููุง ุงููุตูุต ุฃู ุงุณุญุจ ููููุง..."
              value={rawText}
              onPaste={handlePaste}
              onChange={(e) => setRawText(e.target.value)}
              className="w-full h-32 p-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500"
            ></textarea>
          </div>

          {/* ุฑูุน ููู */}
          <div 
            onDragOver={handleDragOver}
            onDragLeave={handleDragLeave}
            onDrop={handleDrop}
            className={`bg-white p-6 rounded shadow-md mb-8 border-2 border-dashed ${dropZoneActive ? 'border-indigo-500 bg-indigo-50' : 'border-gray-300'}`}
          >
            <h3 className="font-semibold text-lg mb-2">ุฑูุน ููู (.txt ุฃู .md)</h3>
            <p className="text-sm text-gray-600 mb-4">ุงุณุญุจ ุงูููู ููุง ุฃู ุงููุฑ ููุงุฎุชูุงุฑ</p>
            <input
              type="file"
              accept=".txt,.md"
              onChange={handleFileUpload}
              className="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:bg-indigo-600 file:text-white hover:file:bg-indigo-700"
            />
          </div>

          {/* ุนุฑุถ ุงููุชุงุฆุฌ */}
          <div className="bg-white p-6 rounded shadow-md mb-8">
            <h3 className="font-semibold text-lg mb-4">ูุชุงุฆุฌ ุงูุงุณุชูุฑุงุฏ</h3>
            <div className="mb-4">
              <p className="text-gray-700">ุนุฏุฏ ุงูุจุฑููุจุชุงุช ุงููุณุชุฎุฑุฌุฉ: <span className="font-medium">{parsedPrompts.length}</span></p>
              <p className="text-gray-700 mt-1">ุนุฏุฏ ุงููููุงุช ุงูุฅุฌูุงูู: <span className="font-medium">
                {parsedPrompts.reduce((sum, p) => sum + p.wordCount, 0)}
              </span></p>
              <p className="text-gray-700 mt-1">ุนุฏุฏ ูุฑุงุช ุงููุณุฎ: <span className="font-medium">{copiedCount}</span></p>
            </div>
            <div className="space-y-2">
              {parsedPrompts.length === 0 && (
                <p className="text-gray-500 text-center py-4">ูู ูุชู ุงูุนุซูุฑ ุนูู ุจุฑููุจุชุงุช ุจุนุฏ.</p>
              )}
              {parsedPrompts.map(prompt => (
                <div key={prompt.id} className="bg-gray-50 p-3 rounded hover:bg-gray-100 flex justify-between items-center">
                  <span className="text-sm md:text-base">{prompt.text}</span>
                  <button
                    onClick={() => copyToClipboard(prompt.text)}
                    className="text-indigo-600 hover:text-indigo-800 px-3 py-1 rounded hover:bg-indigo-50"
                  >
                    ๐ ูุณุฎ
                  </button>
                </div>
              ))}
            </div>
          </div>

          {/* ุฃุฒุฑุงุฑ ุงูุชููู */}
          <div className="flex space-x-4 rtl:space-x-reverse">
            <a href="index.html?tab=prompts" className="px-6 py-3 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition">
              โ ุงูุฐูุงุจ ุฅูู ุฅุฏุงุฑุฉ ุงูุจุฑููุจุชุงุช
            </a>
            <a href="index.html" className="px-6 py-3 bg-gray-600 text-white rounded hover:bg-gray-700 transition">
              ๐ ุงูุฐูุงุจ ุฅูู ููุญุฉ ุงูุชุญูู
            </a>
          </div>
        </div>
      );
    }

    const root = window.ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
